{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  //"ConnectionStrings": {
  //  "IdentityConnection": "Server=host.docker.internal;Database=IdentityECommerceDb;User ID=sa;Password=Lqt@1234;TrustServerCertificate=True;MultipleActiveResultSets=true"
  //},
  "ConnectionStrings": {
    "OrderConnection": "Server=.;Database=OrderECommerceDb;User ID=sa;Password=Lqt@1234;TrustServerCertificate=True;MultipleActiveResultSets=true"
  },
  "MySerilog": {
    "FileName": "OrderApi"
  },

  "JwtSettings": {
    "SecretKey": "qa12ed34TGH67JKiYK89LOF4Gf6Hy98Gtyuj7Ki34F",
    "Issuer": "http://localhost:8080",
    "Audience": "http://localhost:8080",
    "AccessTokenExpirationMinutes": 15,
    "RefreshTokenExpirationDays": 7
  },
  "RabbitMQ": {
    "Host": "localhost",
    "Username": "guest",
    "Password": "guest"
  }
}



// note

//➡ Khi biên dịch (codegen), nó tạo ra 2 thứ:

//Bên InventoryService(server) triển khai InventoryBase
//→ trả CheckInventoryReply.

//Bên OrderService (client) sử dụng Inventory.InventoryClient
//→ gọi CheckInventoryAsync(...) và nhận về CheckInventoryReply.




//note 2

//[OrderService.Application]    <--- gọi qua gRPC --->   [InventoryService.gRPC]
//     |
//     |--- dùng IInventoryServiceClient (interface)
//     |
//     |--- return bool hoặc DTO tùy logic nội bộ
// phải có cấu hình ở file solution và cả program.cs: both( server + client), server, client


//+-----------+         +-----------------+        +-----------------+        +-------------------------+
//|  Customer | ----->  |  Order Service  | -----> |   RabbitMQ      | -----> |  OrderSaga Orchestrator |
//| CreateOrder|         | Save Order(Pending) |    |  order.created  |        | Start Saga Workflow     |
//+-----------+         +-----------------+        +-----------------+        +-------------------------+
//                                                                                     |
//                                                                                     |
//                                                                                     v
//                                                                              +----------------+
//                                                                              | SagaRepo       |
//                                                                              | Save saga step |
//                                                                              +----------------+
//                                                                                     |
//                                                                                     v
//         +---------------------------------- Saga Steps ----------------------------------+
//         | Step 1 | OrderService.MarkProcessing                                          |
//         | Step 2 | InventoryService.ReserveInventory                                    |
//         | Step 3 | PaymentService.ProcessPayment                                        |
//         | Step 4 | OrderService.MarkPaid                                                |
//         |                        |
//         +--------------------------------------------------------------------------------+
//                                                                                     |
//                                                                                     v
//                                                                            [If Error → Compensation]
//                                                                                     |
//                                                                                     v
//                                                                               +---------------------+
//                                                                               | Compensate Logic    |
//                                                                               | - Refund payment    |
//                                                                               | - Release inventory |
//                                                                               | - Cancel order      |
//                                                                               +---------------------+
//+-----------+         +-----------------+        +-----------------+        +-------------------------+
//|  Customer | ----->  |  Order Service  | -----> |   RabbitMQ      | -----> |  OrderSaga Orchestrator |
//| CreateOrder|         | Save Order(Pending) |    |  order.created  |        | Start Saga Workflow    |
//+-----------+         +-----------------+        +-----------------+        +-------------------------+
//                                                                                     |
//                                                                                     |
//                                                                                     v
//                                                                              +----------------+
//                                                                              | SagaRepo       |
//                                                                              | Save saga step |
//                                                                              +----------------+
//                                                                                     |
//                                                                                     v
//         +---------------------------------- Saga Steps ----------------------------------+
//         | Step 1 | OrderService.MarkProcessing                                          |
//         | Step 2 | InventoryService.ReserveInventory                                    |
//         | Step 3 | PaymentService.ProcessPayment                                        |
//         | Step 4 | OrderService.MarkPaid                                               |
//         | Step 5 | (Optional) NotifyService.SendNotification                            |
//         +--------------------------------------------------------------------------------+
//                                                                                     |
//                                                                                     v
//                                                                            [If Error → Compensation]
//                                                                                     |
//                                                                                     v
//                                                                               +---------------------+
//                                                                               | Compensate Logic    |
//                                                                               | - Refund payment    |
//                                                                               | - Release inventory |
//                                                                               | - Cancel order      |
//                                                                               +---------------------+
